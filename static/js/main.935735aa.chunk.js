(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{155:function(e,a,t){},164:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(24),c=t.n(r),o=t(8),s=(t(86),t(87),t(7)),m=t(10),i=t(11),u=(t(92),"http://tatacourt-env.eba-mthmxgh4.ap-south-1.elasticbeanstalk.com/api"),d=function(e){var a=new Headers({"Content-Type":"application/json"});localStorage.getItem("accessToken")&&a.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var t={headers:a};return e=Object.assign({},t,e),fetch(e.url,e).then((function(e){return e.json().then((function(a){return e.ok?a:Promise.reject(a)}))}))};var g=t(9),f=t.n(g),E="SET_USER",b="REMOVE_USER",h=Object(s.g)(Object(i.b)((function(e){return{user:e.user}}),(function(e){return{removeUser:function(){return e({type:b})}}}))((function(e){var a=e.user,t=e.removeUser,r=e.history,c=Object(n.useState)(!0),s=Object(m.a)(c,2),i=s[0],g=s[1];return l.a.createElement("div",{className:"header"},l.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-light"},l.a.createElement(o.b,{className:"navbar-brand",to:"/"},"Food Court"),l.a.createElement("button",{className:"custom-toggler navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExample09","aria-controls":"navbarsExample09","aria-expanded":!i,"aria-label":"Toggle navigation",onClick:function(){return g(!i)}},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"".concat(i?"collapse":""," navbar-collapse"),id:"navbarSupportedContent"},l.a.createElement("ul",{className:"navbar-nav ml-auto"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{className:"nav-link",to:"/meals"},"MEALS")),a?l.a.createElement("li",{className:"nav-item"},l.a.createElement("span",{className:"nav-link",onClick:function(){d({url:u+"/signout",method:"GET"}).then((function(e){localStorage.removeItem("accessToken"),t(),f.a.success("You are successfully logged out!"),r.push("/")})).catch((function(e){f.a.error("Something went wrong. Please try again.")}))}},"SIGN OUT")):l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{className:"nav-link",to:"/signin"},"SIGN IN")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{className:"nav-link",to:"/signup"},"SIGN UP")))))))})));var p=Object(i.b)((function(e){return{user:e.user}}),null)((function(e){var a=e.user;return l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h1",null,"Welcome to your meal analysis"),a?l.a.createElement(o.b,{to:"meals"},"Click here to see your meals"):l.a.createElement(o.b,{to:"signup"},"Want your meal analysis, sign up!!! "))})),v=t(25),N=t(16),O=Object(s.g)((function(e){var a=e.history,t=Object(n.useState)({name:"",email:"",password:""}),r=Object(m.a)(t,2),c=r[0],o=r[1],s=function(e){var a=e.target,t=a.name,n=a.value;o(Object(N.a)(Object(N.a)({},c),{},Object(v.a)({},t,n)))};return l.a.createElement("div",{className:"container"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){return d({url:u+"/signup",method:"POST",body:JSON.stringify(e)})}(Object.assign({},c)).then((function(e){f.a.success("You are successfully registered. Please Sign In to continue."),a.push("/signin")})).catch((function(e){f.a.error("Something went wrong. Please try again.")}))}},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"name",className:"col-sm-2 col-form-label"},"Name"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"text",name:"name",value:c.name,onChange:s,className:"form-control",placeholder:"Name"}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"email",className:"col-sm-2 col-form-label"},"Email"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Email",value:c.email,onChange:s}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"password",className:"col-sm-2 col-form-label"},"Password"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",value:c.password,onChange:s}))),l.a.createElement("button",{type:"submit",className:"btn btn-primary "},"Sign Up")))})),y=Object(s.g)(Object(i.b)(null,(function(e){return{setUser:function(a){return e(function(e){return{type:E,payload:e}}(a))}}}))((function(e){var a=e.history,t=e.setUser,r=Object(n.useState)({email:"",password:""}),c=Object(m.a)(r,2),o=c[0],s=c[1],i=function(e){var a=e.target,t=a.name,n=a.value;s(Object(N.a)(Object(N.a)({},o),{},Object(v.a)({},t,n)))};return l.a.createElement("div",{className:"container"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){return d({url:u+"/signin",method:"POST",body:JSON.stringify(e)})}(Object.assign({},o)).then((function(e){localStorage.setItem("accessToken",e.token),console.log(e.user),t(e.user),f.a.success("You are successfully logged in!"),a.push("/")})).catch((function(e){f.a.error("Something went wrong. Please try again.")}))}},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"email",className:"col-sm-2 col-form-label"},"Email"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Email",value:o.email,onChange:i}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"password",className:"col-sm-2 col-form-label"},"Password"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",value:o.password,onChange:i}))),l.a.createElement("button",{type:"submit",className:"btn btn-primary "},"Sign In")))}))),w=t(74),j=t.n(w),S=function(e){var a=e.meals,t=e.startDate,n=e.onDeleteClick,r=j()(t).format("MMM Do YY");return l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Meals on ".concat(r)),l.a.createElement("table",{className:"table text-center"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Meal Name"),l.a.createElement("th",null,"Calories"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a.length>0?a.map((function(e){return l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,l.a.createElement(o.b,{to:{pathname:"/meal/"+e._id,mealRequest:e}},e.name)),l.a.createElement("td",null,e.calories),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return n(e)}},"Delete")))})):l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("h5",{style:{paddingTop:40}},"No data for this date"))))))},D=t(37),C=t.n(D),k=(t(63),t(98),Object(i.b)((function(e){return{user:e.user}}),null)((function(e){var a=e.user,t=Object(n.useState)(!1),r=Object(m.a)(t,2),c=r[0],o=r[1],i=Object(n.useState)([]),g=Object(m.a)(i,2),f=g[0],E=g[1],b=Object(n.useState)([]),h=Object(m.a)(b,2),p=h[0],v=h[1],N=Object(n.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),O=Object(m.a)(N,2),y=O[0],w=O[1];Object(n.useEffect)((function(){var e;console.log("useEffect"),a&&(e=a._id,d({url:u+"/user/".concat(e,"/aggreagateMeals"),method:"GET"})).then((function(e){console.log(e.caloriesByDate),E(function(e){console.log(e);for(var a=[],t=[],n=0;n<e.length;n++)e[n].calories>=2e3?(console.log(e[n].calories),console.log(e[n]._id),a.push(new Date(e[n]._id))):t.push(new Date(e[n]._id));return[{"react-datepicker__day--highlighted-custom-1":a},{"react-datepicker__day--highlighted":t}]}(e.caloriesByDate))})).catch((function(e){console.log(e)}))}),[a]),Object(n.useEffect)((function(){var e,t;console.log("useEffect2"),a&&(e=a._id,t=y.getTime(),d({url:u+"/user/".concat(e,"/allMeals?requestDate=").concat(t),method:"GET"})).then((function(e){v(e.meal)})).catch((function(e){console.log(e)}))}),[a,y]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},c&&l.a.createElement(s.a,{to:"/meal"}),l.a.createElement("h5",{style:{marginBottom:30}},"Meals Daily"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4 col-sm-4 col-md-4 text-center"},l.a.createElement("div",null,l.a.createElement("span",{style:{borderRadius:"0.3rem",backgroundColor:"red",color:"#fff"}},"Red"),"- High Calories/day"),l.a.createElement("div",null,l.a.createElement("span",{style:{borderRadius:"0.3rem",backgroundColor:"#3dcc4a",color:"#fff"}},"Green"),"- Low Calories/day"),l.a.createElement("div",{style:{marginBottom:30}},"Limit: 2000 Calories"),l.a.createElement(C.a,{selected:y,onChange:function(e){return w(e)},highlightDates:f,placeholderText:"This highlight two ranges with custom classes",inline:!0})),l.a.createElement("div",{className:"col-lg-8 col-sm-8 col-md-8 text-center"},console.log(p),l.a.createElement("button",{style:{marginBottom:20},className:"btn btn-primary",onClick:function(){return o(!0)}},"Add Meal"),l.a.createElement(S,{meals:p,startDate:y,onDeleteClick:function(e){var t,n;(t=a._id,n=e._id,d({url:u+"/user/".concat(t,"/meal/").concat(n,"/deleteMeal"),method:"DELETE"})).then((function(a){v(p.filter((function(a){return a._id!==e._id})))})).catch((function(e){console.log(e)}))}})))))}))),_=Object(s.g)((function(e){var a=e.mealRequest,t=e.onSave,n=e.onChange,r=e.setStartDate,c=e.startDate,o=e.mealId;return l.a.createElement("div",{className:"container"},l.a.createElement("form",{onSubmit:t},l.a.createElement("h2",null,o?"Edit":"Add"," Meal"),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"meal",className:"col-sm-2 col-form-label"},"Meal"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"text",className:"form-control",name:"name",placeholder:"Meal",value:a.name,onChange:n}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"calories",className:"col-sm-2 col-form-label"},"Calories"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"number",className:"form-control",name:"calories",placeholder:"Calories",value:a.calories,onChange:n}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"calories",className:"col-sm-2 col-form-label"},"Select Date"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(C.a,{selected:c,onChange:function(e){return r(e)}}))),l.a.createElement("button",{type:"submit",className:"btn btn-primary "},"Save")))})),M=Object(s.g)(Object(i.b)((function(e){return{user:e.user}}),null)((function(e){e.meal;var a=e.user,t=e.history,r=Object(n.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),c=Object(m.a)(r,2),o=c[0],s=c[1],i=Object(n.useState)({name:"",calories:""}),g=Object(m.a)(i,2),E=g[0],b=g[1],h=Object(n.useState)(),p=Object(m.a)(h,2),O=p[0],y=p[1];Object(n.useEffect)((function(){if(console.log("useEffect ManageMeals"),console.log(t.location.mealRequest),t.location&&t.location.mealRequest){var e=t.location.mealRequest;b({name:e.name,calories:e.calories}),s(new Date(e.updatedDate)),y(e._id)}}),[t.location]);return l.a.createElement(_,{mealRequest:E,onChange:function(e){var a=e.target,t=a.name,n=a.value;b(Object(N.a)(Object(N.a)({},E),{},Object(v.a)({},t,n)))},onSave:function(e){e.preventDefault(),E.updatedDate=o.getTime(),E.calories=parseInt(E.calories);var n=Object.assign({},E);console.log(n),O?function(e,a,t){return d({url:u+"/user/".concat(a,"/meal/").concat(t,"/updateMeal"),method:"POST",body:JSON.stringify(e)})}(n,a._id,O).then((function(e){f.a.success("Meal updated successfully!"),b({name:"",calories:""}),t.push("/meals")})).catch((function(e){f.a.error("Something went wrong. Please try again.")})):function(e,a){return d({url:u+"/user/".concat(a,"/addMeal"),method:"POST",body:JSON.stringify(e)})}(n,a._id).then((function(e){f.a.success("Meal added successfully!"),b({name:"",calories:""})})).catch((function(e){f.a.error("Something went wrong. Please try again.")}))},setStartDate:s,startDate:o,mealId:O})}))),T=Object(s.g)(Object(i.b)((function(e){return{user:e.user}}))((function(e){var a=e.component,t=e.user;return l.a.createElement(s.b,{render:function(e){return t?l.a.createElement(a,null):l.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}})})));t(155),t(156),t(157);var P=function(){return l.a.createElement("div",{className:"container-fuild"},l.a.createElement(h,null),l.a.createElement(s.d,null,l.a.createElement(s.b,{exact:!0,path:"/",component:p}),l.a.createElement(s.b,{path:"/signup",component:O}),l.a.createElement(s.b,{path:"/signin",component:y}),l.a.createElement(T,{path:"/meals",component:k}),l.a.createElement(T,{path:"/meal",component:M}),l.a.createElement(T,{path:"/meal/:mealId",component:M})),l.a.createElement(f.a,{stack:{limit:3},timeout:3e3,position:"top-right",effect:"slide",offset:65}))},I=t(77),F=t(15),x=t(78),R=t(79),U=t.n(R),B=t(42),q=t(80),G={user:null};var Y={key:"root",storage:t.n(q).a,whitelist:["user"]},J=Object(F.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.user,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case E:return Object(N.a)(Object(N.a)({},e),a.payload);case b:return null;default:return e}}}),L=Object(B.a)(Y,J),A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,W=[];W.push(U()());var H=Object(x.createLogger)({predicate:function(){return!1}});W.push(H);var V=Object(F.e)(L,G,A(F.a.apply(void 0,W))),X=Object(B.b)(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(i.a,{store:V},l.a.createElement(o.a,null,l.a.createElement(I.a,{persistor:X},l.a.createElement(P,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,a,t){e.exports=t(164)},87:function(e,a,t){},92:function(e,a,t){},98:function(e,a,t){}},[[81,1,2]]]);
//# sourceMappingURL=main.935735aa.chunk.js.map